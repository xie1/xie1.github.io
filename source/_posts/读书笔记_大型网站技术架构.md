---
title: 读书笔记_大型网站的技术架构
date: 2019-04-05 23:01:41
tags:
categories: 读书笔记
---
#一、*思维导图*
#*总知识点*

##一、大型网站软件系统特点
	1、高并发，大流量
	2、高可用
	3、海量数据
	4、用户广泛，网络情况复杂
	5、安全环境恶劣
	6、需求快速迭代
	7、渐进式发展

##二、网站架构模式
###1、分层
	1、应用层
	2、服务层
	3、数据层
###2、分割
###3、分布式
	1、分布式应用和服务
	2、分布式静态资源
	3、分布式数据和存储
	4、分布式计算
###4、集群
	多台服务部署相同应用构成一个集群，通过负载均衡设备共同对外提供服务
###5、缓存
	1、CDN
	2、反向代理
	3、本地缓存
	4、分布式缓存
###6、异步
	1、提供系统可用性
	2、加快网站响应速度
	3、消除并发访问高峰

###7、冗余
	1、数据冗余备份
###8、自动化
###9、安全性
	1、身份认证
	2、网络敏感信息加密

##三、大型网站核心架构要素
##1、性能（网站的指标，响应时间，TPS，系统性能）
	###1.1、架构
	1、网站性能指标
		1、响应时间
		2、并发数
		3、吐量，是指单位时间内系统处理的请求数量，体现系统整体处理能力
		4、性能计算器
	2、性能优化策略
		1、性能分析：请求处理各个环节日志，分析哪个环节响应时间不合理，监控数据
		2、性能优化：
			1、web前端性能优化
			2、应用服务器性能优化
			3、存储服务器性能优化

####1.1.1、web前端性能优化
	浏览器访问优化
	1、减少http请求
	2、使用浏览器缓存
	3、启用压缩
	4、css放在页面最上面，Js放在页面的最下面
	5、减少cookie
	cdn加速：内容分布网络，本质是一个缓存，而且将缓存在离用户最近的地方，使用户最快速获取数据
####1.1.2、应用服务器性能优化（优先考虑使用缓存优化性能）
	1、分布式缓存，缓存本质是一个内存Hash表，网络应用中，数据缓存以一对key，value形式存储在内存Hash表中，即计算key的hashcode，计算hashcode对应Hash表索引（求余）、
	分布式缓存架构：
		1、一种以Cache为代表的需要更新同步的分布式缓存
		2、一种以memcached为代表的不互相通信的分布式缓存
	异步操作：
		由消息队列的消息者进场，从消息队列中获取数据，异步写入数据库，
	使用集群：
	代码优化：web应用服务器都是采用多线程去响应
		1、多线程，线程安全，将对象设计为无状态对象，使用局部对象，并发加锁
		2、资源复用（单例，对象池（线程池，连接池））
		3、数据结构
		4、垃圾回收
####1.1.3、存储服务器性能优化
##2、可用性
###2.1、高可用架构（主要基于服务无状态这个特性）
	1、应用层
	2、服务层
	3、数据层
###2.2、高可用的应用
	1、通过负载均衡进行无状态服务的失效转移（心跳检测作用）
	2、应用服务器集群的session管理
###2.3、高可用的服务
	1、分级管理
	2、超时设置
	3、异步调用
	4、服务降低
	5、幂等性设计
###2.3、高可用数据
	1、手段主要是数据备份和失效转移机制
	CAP原理，一个提供数据服务的存储系统无法同时满足一致性C，可用性A，伸缩性P
	数据一致性：
		1、数据强于一致性
		2、数据用于一致性
		3、数据最终一致性
	2、数据备份
		数据热可分：异步热备，同步热备
	失效转移操作由三部分：失效确认，访问转移，数据恢复
		1、失效确认（应用程序访问失效报告，心跳检测）
		2、访问转移
		3、数据恢复
##3、伸缩性：负载均衡，集群
###3.1、应用服务器集群的伸缩性
	1、HttP重定向负载均衡
	2、DNS域名解析负载均衡
	3、反向代理负载均衡（应用层负载均衡）、
	4、IP负载均衡  （网络层）
	5、数据链路层负载均衡 （物理层）
	负载均衡算法：
	1、轮询
	2、加权轮询
	3、随机
	4、最少连接
	5、原地址散列
###3.2、分布式缓存集群的伸缩性
	路由算法-》一致性Hash算法
###3.3、数据存储服务器集群的伸缩设计
	1、关系数据库
		1、数据库主从读写分离
		2、数据库分库，跨库的表不能用join操作
	2、MySQL数据库伸缩设计
##4、扩展性
###4.1、利用分布式消息队列降低系统耦合性
	消息队列利用发布-订阅模式工作，消息发送者发布消息，一个或者多个消息接受者订阅
###4.2、利用分布式服务打造可复用的业务平台
	1、拆分：
		1、横纵拆分
	2、分布式服务框架设计：dubbo
##5、安全性
###5.1、xss攻击和SQL注入攻击
	1、xss攻击，即跨站点脚本攻击，指黑客通过修改页
		1、加密:单向散列，对称加密，非对称加密
	2、信息过滤与反垃圾
		1、文本匹配
		2、分类算法
		3、黑名单

	








