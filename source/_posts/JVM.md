---
title: JVM
date: 2018-11-18 14:17:59
tags: JVM
categories: Java基础
---

# 一、*思维导图*
[http://naotu.baidu.com/file/b9498e3305b1f1e0f23ba2545bcc3893](http://naotu.baidu.com/file/b9498e3305b1f1e0f23ba2545bcc3893)
# 二、*JVM知识点*
JVM = 类加载器 classloader + 执行引擎 execution engine + 运行时数据区域 runtime data area
## 1、自动内存管理机制
### 1.1、虚拟机内存区域与内存溢出异常
####1.1.1、运行时的数据区域
			 1、程序计数器
			 2、Java虚拟机栈
			 3、本地方法栈
			 4、Java堆 ：存放对象实例（通过-Xmx和-Xms控制）
			 5、方法区：存储已被虚拟机加载的类信息、常量、静态方法
####1.1.2、HotSpot虚拟机对象
		1、对象的创建
		2、对象的内存布局
		3、对象的访问定位
####1.1.3、实战：OutOfMemoryError异常
		 1、Java堆溢出
		 2、虚拟机栈和本地方法栈溢出
		 3、方法区和运行时常量池溢出
		 4、本机直接内存溢出
###1.2、垃圾收集算法与内存分配策略
####1.2.1、判断对象是否已经死：
		1、引用计数算法	
		2、根搜索算法
		3、引用：
			 1、强引用
			 2、软引用
			 3、弱引用
			 4、虚引用
####1.2.2、垃圾收集算法
		 1、标记-清除算法
		 2、复制算法
		 3、标记-整理算法
		 4、分代收集算法
####1.2.3、内存分配与回收策略
#### 1.2.4、虚拟机性能监控与故障处理工具
#####  1.2.4.1、JDK命令
		1、jps:虚拟机进程状况工具
		2、jstat:虚拟机统计信息工具
		3、jinfo:Java配置信息工具
		4、jmap:Java内存映像工具
		5、jhat:虚拟机堆转储快照分析工具
		6、jstack:Java堆栈跟踪工具
##### 1.2.4.2、可视化工具
#### 1.2.5、调优案例分析与实战





## 2、虚拟机执行子系统
### 2.1、类文件结构	
#### 2.1.1、Class文件结构
		1、魔数与Class类文件的版本
		2、常量池
		3、访问标志
		4、类索引、父类索引与接口索引集合
		5、字段表集合
		6、方法表集合
		7、属性表集合
### 2.2、虚拟机类加载机制
#### 2.2.1、类加载的时机
#### 2.2.2、类加载的过程
		1、加载，验证，准备，解析，初始化（4个触发点），使用，卸载
		2、虚拟机把描述类的数据从Class文件加载到内存，并对数据进行校验，转换解析和初始化最终形成可以被虚拟机直接使用的Java类型，这就是虚拟机的类加载机制
#### 2.2.3、类加载器
		 1、类与类加载器
		 2、双亲委派模型
		 3、破坏双亲委派模型
### 2.3、虚拟机字节码执行引擎
#### 2.3.1、运行时栈帧结构
		 1、局部变量表
		 2、操作数栈
		 3、动态连接
		 4、方法返回址
		 5、附加信息
#### 2.3.2、方法调用





## 3、程序编译与代码优化
### 3.1、早期（编译期）优化
#### 3.1.1、Javac编译器
		 1、Javac的源码与调试
			 1、字节码编译过程，javac 通过把java文件编译成Class文件，其中编译过程中存在着语法及结构关系对应
		 2、解析与填充符号表
		 3、注解处理器
		 4、语义分析与字节码生成
#### 3.1.2、Java语法糖的味道
		1、java语言中泛型、自动装箱及拆箱、遍历循环与变长参数
### 3.2、晚期（运行期）优化
#### 3.2.1、HotSpot 虚拟机内的即时编译器




## 4、高效并发
### 4.1、Java内存模型与线程
#### 4.1.1、Java内存模型
	1、主内存与工作内存
	2、内存间交互操作
	3、对于volatile型变量的特殊规则
	4、对于long和double型变量的特殊规则
	5、原子性，可见性与有序性
	6、先行发生原则
#### 4.1.2、Java与线程
### 4.2、线程安全与锁优化
#### 4.2.1、线程安全
	 1、java语言中的线程安全
	 2、线程安全的实现方法
#### 4.2.2、锁优化
	1、自旋锁与自适应自旋
	2、锁消除
	3、锁粗化
	4、轻量级锁
	5、偏向锁



# 三、*重点分析JVM知识点*
	这块会重点分析以下几个方面的知识：
		JVM的系列文章：
		1、虚拟内存区域（运行时的数据区域）
		2、垃圾收集机制
		
		3、Class文件结构
		4、虚拟机类加载机制
		5、虚拟机字节码执行（栈帧）
		
		6、早期编译及晚期优化
		
		7、Java内存模型与线程
		8、线程安全与锁优化
	
# 四、*参考资料*