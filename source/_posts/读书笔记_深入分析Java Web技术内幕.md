---
title: 读书笔记_深入分析Java Web技术内幕
date: 2019-04-05 23:01:41
tags:
categories: 读书笔记
---



#一、*思维导图*
#*总知识点*

#####一、JavaWeb基本知识
######1、Web请求过程
######2、HTTP
######3、DNS技术和CDN技术
######二、Java技术
######1、I/O技术
######2、中文编码问题
######3、Javac编译原理
######4、class文件结构解析
######5、ClassLoader工作机制及JVM的内存管理等
######三、Java服务器技术
######1、Servlet
######2、Session与Cookie
######3、Tomcat与Jetty服务器
######4、Spring容器
######5、IBatis框架
######6、Velocity
######四、服务器优化



[TOC]

####第1章、深入Web请求过程
#####1.1、B/S网络架构概述		
		1、一个从浏览器至服务器请求的过程
#####1.2、如何发起一个请求
		1、[HttpClient使用原理](https://www.ibm.com/developerworks/cn/opensource/os-httpclient/index.html)
			类似于linux系统中curl命令+url发起一个请求地址
#####1.3、Http解析
		1、Http Header(请求头和响应头)![请求头和响应头及状态码](./微信图片_20180920214607.jpg)
		 
######1.3.1、浏览器缓存机制
######1.4、DNS域名解析
		1、域名解析过程![Alt text](./微信图片_20180920220357.jpg)
			其中从根域名（.）到gTLD Server（.com）再到Name server（taobao.com）
		2、清除缓存的域名 
#####1.5、CDN工作机制 
		CDN= 镜像+缓存+整体负载均衡
		1、CDN架构
		2、负载均衡
			1、链路负载均衡：通过DNS解析成不同的IP，然后用户根据这个IP来访问不同的目标服务器
			2、集群负载均衡
				硬件负载均衡：一般使用专门的一台硬件设备来转发请求
				软件负载均衡
			3、操作系统负载均衡
		3、CDN动态加速
			在CDN解析中通过动态的链路探测来寻找回源最好的一条路径




####第2章、深入分析 Java I/O的工作机制
			
#####2.1、Java的I/O类库的基本架构
		1、分类：
		基于字节操作的I/O接口：InputStream 和 OutputStream
		基于字符操作的I/O接口：Writer和Reader
		基于磁盘操作的I/O接口：File
		基于网络操作的I/O接口：Socket
######2.1.1、基于字节的I/O操作接口
			可以考虑对数据封装，装饰模式（设计模式）
######2.1.2、基于字符的I/O操作接口
		1、关注从字节到字符的编解码的乱码问题
######2.1.3、字节与字符的转化接口
		1、InputStreamReader类是从字节到字符的转化桥梁，从InputStream到Reader的过程要指定特定的编码字符集（有多少我们常用的编码字符集）。否则将采用操作系统默认的字符集，很可能会出现乱码  由StreamDecoder完成字节到字符编码实现类
		2、OutputStreamWriter类也是类似
	
#####2.2、磁盘I/O工作机制	
######2.2.1、几种访问文件的方式
		1、标准访问文件的方式
			1、当应用程序调用read（）接口时，操作系统会检查在内核的高速缓存中是否有没有需要的数据，如果已经缓存，那么接直接从缓存中返回，如果没有从磁盘中读取，然后缓存就在操作系统的缓存中
			2、当应用程序调用write()接口将数据从用户地址空间复制到内核地址的缓存中，这时对用户来说写操作已经完成。至于什么时候在写到磁盘由操作系统决定，除非显示调用sync同步命令
		2、直接I/O的方式
			应用程序直接访问磁盘数据，而不经过操作系统内核数据的缓冲区，这样做的目的是减少一次从内核缓冲区到用户数据缓冲的数据复制
		3、同步访问文件的方式
			数据的读取和写入都是同步操作，只有当数据被访问写到磁盘时才返回成功标志
		4、异步访问文件的方式
			当访问数据的线程发出请求之后，线程会接着去处理其他的事情，而不需要堵塞等待，当请求数据有返回后继续处理下面的操作
		5、内存映射的方式
			指操作系统将内存中的某一块区域与磁盘中的文件关联起来，当要访问内存中的一段数据时，转换为访问数据的某一段数据
######2.2.2、Java访问磁盘文件（File）
######2.2.3、Java序列化技术
		1、序列化：将一个对象转化成一串二进制表示的字节数组，通过保存或转移这些字节数据来达到持久化的目的，不过对象需要实现Serializable接口
		2、反序列化：必须有原始类作为模板，才能将对象还原。但是序列化的数据没有像class文件那样保存类的完整结构信息
		注意：
			1、当父类继承Serializable接口时，所有的子类都可以被序列化
			2、子类实现Serializable接口，父类没有，父类中的属性不能序列化（不报错，数据会丢失），但是在子类中属性可以正确序列化
			3、如果序列化得属性是对象，则这个对象也必须实现Serializable接口，否则报错
			4、在反序列化时，如果对象的属性有修改或删减，则修改的部分属性会丢失，但不会报错
			5、在反序列化时，如果SerialVersionUId被修改，反序列化时失败
	
#####2.3、网络I/O工作机制
#####2.3.1、TCP状态转化
		

![Alt text](./微信图片_20181008222723.jpg)
#####2.3.2、影响网络传输的因素
		响应时间
		1、网络带宽
		2、传输距离
		3、TCP拥塞控制
#####2.3.3、Java Socket的工作机制
		它是描述计算机之间完成相互通信的一种抽象
#####2.3.4、建立通信链路	
		1、建立Socket
		2、建立ServerSocket
#####2.4、NIO的工作方式
#####2.4.1、BIO（堵塞）带来的挑战
#####2.4.2、NIO的工作机制
			1、NIO引入Channel、Buffer、Selector 
#####2.4.3、Buffer的工作方式
		Selector检测到通信信道I/O有数据传输时，通过select()取得SocketChannel,将数据读取或写入Buffer缓冲区。
#####2.4.4、NIO的数据访问方式
		1、FileChannel.transferTo
		2、FileChannel.transferFrom
		3、FileChannel.map	
#####2.5、磁盘I/O优化
#####2.5.1、磁盘I/O优化
		1、性能检测
		2、提升I/O性能
			1、增加缓冲，减少磁盘访问次数
			2、优化磁盘的管理系统，设计最优的磁盘方式策略，以及磁盘的寻址策略，
			3、设计合理磁盘存储数据块
			4、应用合理的RAID策略提升磁盘I/O
#####2.5.2、TCP网络参数调优
#####2.5.3、网络I/O调优
		1、减少网络交互次数
		2、减少网络传输数据量大小
		3、减少编码
			1、同步与异步
			2、阻塞与非阻塞
#####2.6、设计模式解析之适配器模式
		就是把一个类的接口变换成客户端所能接受的另一种接口，从而使两个接口不匹配而无法在一起工作的两个类能够一起工作
#####2.6.1 适配器模式结构 
		JavaI/O适配器模式
#####2.7、设计模式解析之装饰器模式
		将某个类重新装扮下，使得它比原来更漂亮或者功能更强大


####第3章、深入分析Java Web中的中文编码问题
#####3.1、几种常见的编码格式
		需要编码原因：
			1、计算机中存储信息最小的单元是一个字节，即8位，所以能够表示的字符范围是0-255个
			2、需要表示的符号太多，一个字节无法表示
		即出现，从char到byte必须编码
#####3.2、在Java中需要编码的场景	
#####3.2.1、在I/O操作中存在的编码
		1、应用程序中涉及到I/O操作时，只要注意指定统一编解码字符集
#####3.2.2、在内存操作中的编码	
#####3.3、在Java中如何编解码
		1、UTF-8是编码是理想的中文编码方式
#####3.4、在Java Web中涉及的编码解码
#####3.4.1、URL的编解码
#####3.4.2、HTTPHeader的编解码
		1、Cookie
		2、redirectPath
		
#####3.4.3、POST表单的编解码
#####3.4.4、HTTP BODY的编解码
#####3.5、在JS中的编码问题
#####3.5.1、外部引入JS文件
#####3.6、常见问题分析
######3.6.1、中文变成了看不懂的字符
		1、出现问题，一个汉字字符变成了两个乱码字符char[]-->byte[]-->char[]
			GBk编码，IOS-8859-1解码
######3.6.2、一个汉字变成一个问号
			IOS-8859-1编码，IOS-8859-1解码
######3.6.3、一个汉字变成两个问号（多次编解码）
######3.6.4、一种不正常的正确编码



####第4章、Javac编译原理
#####4.1、Javac是什么
		Javac的任务就是将Java源代码语言先转化成JVM能够识别的一种语言，然后由JVM将JVM语言再转化成当前这个机器能够识别的机器语言。
#####4.2、Javac编译器的基本结构	
		词法分析：从源代码中找出一些规范化的Token流
		语法分析：检查这些关键词组合在一起是不是符合Java语言规范，结果是形成一个符合Java语言规范的抽象语法树
		语义分析：将复杂的语法转化成最简单的语法。
	Javac组件：
		源码--》token流（词法分析器组件）--》语法树（语法分析器组件）--》注解语法树（语义分析器组件）--》字节码（代码生成器组件）
#####4.3、Javac工作原理
######4.3.1、
		